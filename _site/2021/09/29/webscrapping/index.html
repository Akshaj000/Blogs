









<!doctype html>
<html class="min-height-full">
  <head >
    
    <meta charset="utf-8">
    <title>WebScraping</title>
    <meta name="description" content="&amp;lt; IntrospectionTask-07 (Webscrapping using golang)I SUGGEST U TO GO ALL THE WAY DOWN TO THE ACTUAL CODE.I couldnt complete this task properly, The code pasted below is done on bloombergI tried the same on forbes and i couldnt succeed.I searched for how to scrap websites using golang and mo..." />
    <meta property="og:title" content="Akshaj Sr" />
    <meta property="og:image" content="https://avatars.githubusercontent.com/u/83636572?v=4" />
    <meta property="og:description" content="&amp;lt; IntrospectionTask-07 (Webscrapping using golang)I SUGGEST U TO GO ALL THE WAY DOWN TO THE ACTUAL CODE.I couldnt complete this task properly, The code pasted below is done on bloombergI tried the same on forbes and i couldnt succeed.I searched for how to scrap websites using golang and mo..." />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link href="/assets/styles.css" rel="stylesheet" type="text/css">
  </head>
  <style>  
  </style>
  <script type="text/javascript">
    window.onload = function () {
        var images = ['gifs/cidade.gif', 'gifs/cidade2.gif','gifs/cidade3.gif','gifs/cidade4.gif'];
        var image = images[Math.floor(Math.random() * images.length)];
        document.getElementsByTagName('body')[0].style.backgroundImage = "url('" + image + "')";
        document.getElementsByTagName('body')[0].style.backgroundRepeat = "no-repeat";
        document.getElementsByTagName('body')[0].style.backgroundSize = "cover";
    }
  </script>
  <body class="bg-githubtwo min-height-full">
    
  	






  <style>
    a{
        color: #5198eb;
        background-color: transparent;
        text-decoration: none;
    } 
  </style>
  <div class="d-md-flex min-height-full ">
    <div class="flex-self-stretch bg-githubone col-md-5 col-lg-4 col-xl-3 px-4 px-md-6 px-lg-7 py-6">
      

<img src="https://avatars.githubusercontent.com/u/83636572?v=4" class="circle mb-3" style="max-width: 150px;">
<h1 class="text-white mb-2 lh-condensed">Akshaj Sr</h1>
<p class="mb-3 f4 text-white">
  Hey, Im an AIE student studying in Amrita University. I still havent figured out what am i good at.
</p>


  <div class="f4 mb-6">
    
      <div class="d-flex flex-items-center mb-3">
        <svg height="20" class="octicon octicon-mark-github mr-2 v-align-middle" fill="#ffffff" aria-label="GitHub" viewBox="0 0 16 16" version="1.1" width="20" role="img"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path></svg>
        <a href="https://github.com/Akshaj000" class="text-white">
          @Akshaj000
        </a>
      </div>
    
    
    
      <div class="d-flex flex-items-center mb-3 text-white">
        <svg height="20" class="octicon octicon-location mr-2 v-align-middle" fill="#ffffff" aria-label="Location" viewBox="0 0 16 16" version="1.1" width="20" role="img"><path fill-rule="evenodd" d="M11.536 3.464a5 5 0 010 7.072L8 14.07l-3.536-3.535a5 5 0 117.072-7.072v.001zm1.06 8.132a6.5 6.5 0 10-9.192 0l3.535 3.536a1.5 1.5 0 002.122 0l3.535-3.536zM8 9a2 2 0 100-4 2 2 0 000 4z"></path></svg>
        Palakkad, Kerala
      </div>
    
    
      <div class="d-flex flex-wrap flex-items-start ">
        
          <div class="mr-3 mb-3">
            
            
            <a href="https://www.hackerrank.com/akshajsr000" class="tooltipped tooltipped-se" aria-label="HackerRank: akshajsr000">
              <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" height="20" xml:space="preserve" viewBox="0 0 126 139"><path xmlns="http://www.w3.org/2000/svg" d="M125.9,62.4L125.9,62.4c-0.2-13-1.2-24.7-2.9-27.6c-1.4-2.4-8.5-7.5-17.3-13.1L82.1,8C73.2,3.3,65.7,0,63,0    c-3.3,0-14,5-25.4,11.4C28.9,16.2,19.8,21.7,13,26.3C7.8,29.9,3.9,33,2.9,34.8s-1.8,6.8-2.2,13.5l0,0c-0.6,8.4-0.8,19.3-0.6,29.3    c0.3,12.7,1.2,23.9,2.8,26.7C6.9,111.1,55.1,139,63,139c3.3,0,13.5-4.8,24.6-10.9c8.8-4.8,18.1-10.5,25.1-15.2l0,0    c5.4-3.7,9.3-6.8,10.4-8.6s1.8-6.7,2.2-13.2l0,0C125.9,82.9,126.1,72.2,125.9,62.4z M91.3,98.8l-9.7,8.8c-0.3,0.4-0.7,0.6-1.2,0.6    c-0.5,0-1-0.2-1.3-0.6L70,98.8c-0.7-0.4-0.9-1.3-0.5-2c0.3-0.5,0.8-0.7,1.3-0.7h2.6V76.4H52.7v21.7c0,0.8-0.7,1.5-1.5,1.5H39.6    c-0.8,0-1.5-0.7-1.5-1.5c0,0,0,0,0,0V42.9h-2.7c-0.8,0-1.5-0.7-1.5-1.5c0-0.5,0.3-1,0.7-1.3l9.7-8.8c0.3-0.4,0.7-0.6,1.2-0.6    c0.5,0,1,0.2,1.3,0.6l9.1,8.8c0.7,0.4,0.9,1.3,0.5,2c-0.3,0.5-0.8,0.7-1.3,0.7h-2.6v18.9h20.7v-21c0-0.8,0.7-1.5,1.5-1.5h11.6    c0.8,0,1.5,0.7,1.5,1.5c0,0,0,0,0,0v55.2h2.7c0.8,0,1.5,0.7,1.5,1.5C92,98.1,91.8,98.6,91.3,98.8z" fill="#959DA5"/></svg><span class="d-none">HackerRank</span>
            </a>
          </div>
        
          <div class="mr-3 mb-3">
            
            
            <a href="https://www.instagram.com/a_k_s_h_a_j" class="tooltipped tooltipped-se" aria-label="Instagram: a_k_s_h_a_j">
              <svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="#959da5"><path d="M256,49.471c67.266,0,75.233.257,101.8,1.469,24.562,1.121,37.9,5.224,46.778,8.674a78.052,78.052,0,0,1,28.966,18.845,78.052,78.052,0,0,1,18.845,28.966c3.45,8.877,7.554,22.216,8.674,46.778,1.212,26.565,1.469,34.532,1.469,101.8s-0.257,75.233-1.469,101.8c-1.121,24.562-5.225,37.9-8.674,46.778a83.427,83.427,0,0,1-47.811,47.811c-8.877,3.45-22.216,7.554-46.778,8.674-26.56,1.212-34.527,1.469-101.8,1.469s-75.237-.257-101.8-1.469c-24.562-1.121-37.9-5.225-46.778-8.674a78.051,78.051,0,0,1-28.966-18.845,78.053,78.053,0,0,1-18.845-28.966c-3.45-8.877-7.554-22.216-8.674-46.778-1.212-26.564-1.469-34.532-1.469-101.8s0.257-75.233,1.469-101.8c1.121-24.562,5.224-37.9,8.674-46.778A78.052,78.052,0,0,1,78.458,78.458a78.053,78.053,0,0,1,28.966-18.845c8.877-3.45,22.216-7.554,46.778-8.674,26.565-1.212,34.532-1.469,101.8-1.469m0-45.391c-68.418,0-77,.29-103.866,1.516-26.815,1.224-45.127,5.482-61.151,11.71a123.488,123.488,0,0,0-44.62,29.057A123.488,123.488,0,0,0,17.3,90.982C11.077,107.007,6.819,125.319,5.6,152.134,4.369,179,4.079,187.582,4.079,256S4.369,333,5.6,359.866c1.224,26.815,5.482,45.127,11.71,61.151a123.489,123.489,0,0,0,29.057,44.62,123.486,123.486,0,0,0,44.62,29.057c16.025,6.228,34.337,10.486,61.151,11.71,26.87,1.226,35.449,1.516,103.866,1.516s77-.29,103.866-1.516c26.815-1.224,45.127-5.482,61.151-11.71a128.817,128.817,0,0,0,73.677-73.677c6.228-16.025,10.486-34.337,11.71-61.151,1.226-26.87,1.516-35.449,1.516-103.866s-0.29-77-1.516-103.866c-1.224-26.815-5.482-45.127-11.71-61.151a123.486,123.486,0,0,0-29.057-44.62A123.487,123.487,0,0,0,421.018,17.3C404.993,11.077,386.681,6.819,359.866,5.6,333,4.369,324.418,4.079,256,4.079h0Z"/><path d="M256,126.635A129.365,129.365,0,1,0,385.365,256,129.365,129.365,0,0,0,256,126.635Zm0,213.338A83.973,83.973,0,1,1,339.974,256,83.974,83.974,0,0,1,256,339.973Z"/><circle cx="390.48" cy="121.52" r="30.23"/></svg><span class="d-none">Instagram</span>
            </a>
          </div>
        
          <div class=" mb-3">
            
            
            <a href="https://www.twitter.com/sr_akshaj" class="tooltipped tooltipped-se" aria-label="Twitter: sr_akshaj">
              <svg height="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 273.5 222.3"><path d="M273.5 26.3a109.77 109.77 0 0 1-32.2 8.8 56.07 56.07 0 0 0 24.7-31 113.39 113.39 0 0 1-35.7 13.6 56.1 56.1 0 0 0-97 38.4 54 54 0 0 0 1.5 12.8A159.68 159.68 0 0 1 19.1 10.3a56.12 56.12 0 0 0 17.4 74.9 56.06 56.06 0 0 1-25.4-7v.7a56.11 56.11 0 0 0 45 55 55.65 55.65 0 0 1-14.8 2 62.39 62.39 0 0 1-10.6-1 56.24 56.24 0 0 0 52.4 39 112.87 112.87 0 0 1-69.7 24 119 119 0 0 1-13.4-.8 158.83 158.83 0 0 0 86 25.2c103.2 0 159.6-85.5 159.6-159.6 0-2.4-.1-4.9-.2-7.3a114.25 114.25 0 0 0 28.1-29.1" fill="#959da5"/></svg><span class="d-none">Twitter</span>
            </a>
          </div>
        
      </div>
    
    
  </div>


      <address>
        <style>
          address{
            text-align: left;
            display: block;
            color: white;
          }
        </style>
        Email me to <a href="mailto:akshajsr000@gmail.com">akshajsr000@gmail.com</a><br>
      </address> 
      <br/>
    </div>

    <div class="col-md-7 col-lg-8 col-xl-9 px-4 py-6 px-lg-7 border-top border-md-top-0 bg-gray-light" style="background-color: #0d1117 !important">
      <div class="mx-auto" style="max-width: 900px;">
        <div class="f4 text-white mb-6">
          <div class="f4 text-white">
            <p class="f5"><a href="http://localhost:4000/" class="d-flex flex-items-center text-white"><svg height="16" class="octicon octicon-chevron-left mr-2 v-align-middle" fill="#ffffff" aria-label="Home" viewBox="0 0 16 16" version="1.1" width="16" role="img"><path fill-rule="evenodd" d="M9.78 12.78a.75.75 0 01-1.06 0L4.47 8.53a.75.75 0 010-1.06l4.25-4.25a.75.75 0 011.06 1.06L6.06 8l3.72 3.72a.75.75 0 010 1.06z"></path></svg>Home</a></p>
            <h1 class="f00-light lh-condensed">WebScraping</h1>
            <p class="text-gray-light mb-5">Published Sep 29, 2021</p>
            
  
    

    

    
    
    
      <div class="col-sm-4 col-lg-3 d-flex flex-wrap flex-items-left d-sm-block float-sm-right p-3 mb-5 ml-md-5">
        <h3 class="text-gray mr-3 mr-sm-0">Share</h3>
        <ul class="d-flex d-sm-block list-style-none">
          
            <li class="mt-sm-3">
              <a href="https://twitter.com/share?url=http%3A%2F%2Flocalhost%3A4000%2F2021%2F09%2F29%2Fwebscrapping%2F" title="Share on Twitter" class="d-flex flex-items-center">
                <div style="width:32px"><svg height="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 273.5 222.3"><path d="M273.5 26.3a109.77 109.77 0 0 1-32.2 8.8 56.07 56.07 0 0 0 24.7-31 113.39 113.39 0 0 1-35.7 13.6 56.1 56.1 0 0 0-97 38.4 54 54 0 0 0 1.5 12.8A159.68 159.68 0 0 1 19.1 10.3a56.12 56.12 0 0 0 17.4 74.9 56.06 56.06 0 0 1-25.4-7v.7a56.11 56.11 0 0 0 45 55 55.65 55.65 0 0 1-14.8 2 62.39 62.39 0 0 1-10.6-1 56.24 56.24 0 0 0 52.4 39 112.87 112.87 0 0 1-69.7 24 119 119 0 0 1-13.4-.8 158.83 158.83 0 0 0 86 25.2c103.2 0 159.6-85.5 159.6-159.6 0-2.4-.1-4.9-.2-7.3a114.25 114.25 0 0 0 28.1-29.1" fill="#959da5"/></svg></div><span class="d-none d-sm-inline-block text-gray-light">Twitter</span>
              </a>
            </li>
          
        </ul>
      </div>
    



  
  <div class="article">
    <p style="text-align:left; color:white">
<a href="/2021/11/19/Amfoss/index.html">&lt; Introspection</a>
</p>
<p><br /></p>

<h2 id="task-07-webscrapping-using-golang"><a href="https://github.com/Akshaj000/amfoss-tasks/tree/master/task-07">Task-07 (Webscrapping using golang)</a></h2>
<h3 id="i-suggest-u-to-go-all-the-way-down-to-the-actual-code">I SUGGEST U TO GO ALL THE WAY DOWN TO THE ACTUAL CODE.</h3>
<p>I couldnt complete this task properly, The code pasted below is done on <a href="https://www.bloomberg.com/billionaires/">bloomberg</a>
I tried the same on <a href="https://www.forbes.com/real-time-billionaires/#131241903d78">forbes</a> and i couldnt succeed.</p>

<p>I searched for how to scrap websites using golang and most of the result came was using colly framework. I basically used the code from there and tweaked a few lines. I did try qoquery framework for forbes . It didnt help. What even worse was the method i used to fetch top 10 lines. Its actually a big mess.</p>
<h3 id="codes-i-tried-on-forbes-">Codes i tried on forbes :</h3>
<p><a href="https://github.com/Akshaj000/amfoss-tasks/blob/master/task-07/trys(unsucessful%20ones)/try1(colly).go">Using colly</a><br />
<a href="https://github.com/Akshaj000/amfoss-tasks/blob/master/task-07/trys(unsucessful%20ones)/try2(goquery).go">Using goquery</a></p>

<h3 id="table-">table :</h3>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
|**Name**       |**Networth**   |**Country**    |**Field**      |
|:-------------:|:-------------:|:-------------:|:-------------:|
|Elon Musk      |$252B          |United States  | Technology    |
|Jeff Bezos     |$193B          |United States  | Technology    |
|BernardArnault |$166B          |France         | Consumer      | 
|Bill Gates     |$134B          |United States  | Technology    |
|Larry Page     |$123B          |United States  | Technology    |
|MarkZuckerberg |$121B          |United States  | Technology    |
|Sergey Brin    |$119B          |United States  | Technology    |
|Larry Ellison  |$114B          |United States  | Technology    |
|Steve Ballmer  |$111B          |United States  | Technology    |
|Warren Buffett |$105B          |United States  | Diversified   |

</code></pre></div></div>
<h3 id="code-">Code :</h3>
<div class="language-golang highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
	<span class="s">"encoding/csv"</span>
	<span class="s">"fmt"</span>
	<span class="s">"io"</span>
	<span class="s">"log"</span>
	<span class="s">"os"</span>

	<span class="s">"github.com/gocolly/colly"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">scrap</span><span class="p">()</span> <span class="p">{</span>

	<span class="n">fName</span> <span class="o">:=</span> <span class="s">"data1.csv"</span>
	<span class="n">file</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">os</span><span class="o">.</span><span class="n">Create</span><span class="p">(</span><span class="n">fName</span><span class="p">)</span>
	<span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
		<span class="n">log</span><span class="o">.</span><span class="n">Fatalf</span><span class="p">(</span><span class="s">"Could not create file, err :%q"</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
		<span class="k">return</span>
	<span class="p">}</span>
	<span class="k">defer</span> <span class="n">file</span><span class="o">.</span><span class="n">Close</span><span class="p">()</span>
	<span class="n">writer</span> <span class="o">:=</span> <span class="n">csv</span><span class="o">.</span><span class="n">NewWriter</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
	<span class="k">defer</span> <span class="n">writer</span><span class="o">.</span><span class="n">Flush</span><span class="p">()</span>

	<span class="n">c</span> <span class="o">:=</span> <span class="n">colly</span><span class="o">.</span><span class="n">NewCollector</span><span class="p">()</span>
	<span class="n">c</span><span class="o">.</span><span class="n">OnError</span><span class="p">(</span><span class="k">func</span><span class="p">(</span><span class="n">r</span> <span class="o">*</span><span class="n">colly</span><span class="o">.</span><span class="n">Response</span><span class="p">,</span> <span class="n">err</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Error:"</span><span class="p">,</span> <span class="n">err</span><span class="o">.</span><span class="n">Error</span><span class="p">())</span>
	<span class="p">})</span>
	<span class="n">c</span><span class="o">.</span><span class="n">OnResponse</span><span class="p">(</span><span class="k">func</span><span class="p">(</span><span class="n">r</span> <span class="o">*</span><span class="n">colly</span><span class="o">.</span><span class="n">Response</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"visited"</span><span class="p">,</span> <span class="n">r</span><span class="o">.</span><span class="n">Request</span><span class="o">.</span><span class="n">URL</span><span class="p">)</span>
	<span class="p">})</span>
	<span class="n">c</span><span class="o">.</span><span class="n">OnHTML</span><span class="p">(</span><span class="s">"div.table-row"</span><span class="p">,</span> <span class="k">func</span><span class="p">(</span><span class="n">e</span> <span class="o">*</span><span class="n">colly</span><span class="o">.</span><span class="n">HTMLElement</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">writer</span><span class="o">.</span><span class="n">Write</span><span class="p">([]</span><span class="kt">string</span><span class="p">{</span>
			<span class="n">e</span><span class="o">.</span><span class="n">ChildText</span><span class="p">(</span><span class="s">"div.table-cell.t-name"</span><span class="p">),</span>
			<span class="n">e</span><span class="o">.</span><span class="n">ChildText</span><span class="p">(</span><span class="s">"div.table-cell.active.t-nw"</span><span class="p">),</span>
			<span class="n">e</span><span class="o">.</span><span class="n">ChildText</span><span class="p">(</span><span class="s">"div.table-cell.t-country"</span><span class="p">),</span>
			<span class="n">e</span><span class="o">.</span><span class="n">ChildText</span><span class="p">(</span><span class="s">"div.table-cell.t-industry"</span><span class="p">),</span>
		<span class="p">})</span>
		<span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">Text</span><span class="p">)</span>
	<span class="p">})</span>

	<span class="n">c</span><span class="o">.</span><span class="n">OnScraped</span><span class="p">(</span><span class="k">func</span><span class="p">(</span><span class="n">r</span> <span class="o">*</span><span class="n">colly</span><span class="o">.</span><span class="n">Response</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Finished"</span><span class="p">,</span> <span class="n">r</span><span class="o">.</span><span class="n">Request</span><span class="o">.</span><span class="n">URL</span><span class="p">)</span>
	<span class="p">})</span>

	<span class="n">c</span><span class="o">.</span><span class="n">Visit</span><span class="p">(</span><span class="s">"https://www.bloomberg.com/billionaires/"</span><span class="p">)</span>
<span class="p">}</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
	<span class="n">scrap</span><span class="p">()</span>
	<span class="n">csvfile1</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">os</span><span class="o">.</span><span class="n">Open</span><span class="p">(</span><span class="s">"data1.csv"</span><span class="p">)</span>
	<span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
		<span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
		<span class="k">return</span>
	<span class="p">}</span>
	<span class="k">defer</span> <span class="n">csvfile1</span><span class="o">.</span><span class="n">Close</span><span class="p">()</span>
	<span class="n">reader</span> <span class="o">:=</span> <span class="n">csv</span><span class="o">.</span><span class="n">NewReader</span><span class="p">(</span><span class="n">csvfile1</span><span class="p">)</span>
	<span class="n">csvfile2</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">os</span><span class="o">.</span><span class="n">Create</span><span class="p">(</span><span class="s">"data.csv"</span><span class="p">)</span>
	<span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
		<span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
		<span class="k">return</span>
	<span class="p">}</span>
	<span class="n">writer</span> <span class="o">:=</span> <span class="n">csv</span><span class="o">.</span><span class="n">NewWriter</span><span class="p">(</span><span class="n">csvfile2</span><span class="p">)</span>

	<span class="k">for</span> <span class="n">i</span> <span class="o">:=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="m">10</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span> <span class="p">{</span>
		<span class="n">record</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">reader</span><span class="o">.</span><span class="n">Read</span><span class="p">()</span>
		<span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
			<span class="k">if</span> <span class="n">err</span> <span class="o">==</span> <span class="n">io</span><span class="o">.</span><span class="n">EOF</span> <span class="p">{</span>
				<span class="k">break</span>
			<span class="p">}</span>
			<span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
			<span class="k">return</span>
		<span class="p">}</span>
		<span class="n">err</span> <span class="o">=</span> <span class="n">writer</span><span class="o">.</span><span class="n">Write</span><span class="p">(</span><span class="n">record</span><span class="p">)</span>
		<span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
			<span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
			<span class="k">return</span>
		<span class="p">}</span>
	<span class="p">}</span>
	<span class="n">writer</span><span class="o">.</span><span class="n">Flush</span><span class="p">()</span>
	<span class="n">err</span> <span class="o">=</span> <span class="n">csvfile2</span><span class="o">.</span><span class="n">Close</span><span class="p">()</span>
	<span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
		<span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
		<span class="k">return</span>
	<span class="p">}</span>
	<span class="n">e</span> <span class="o">:=</span> <span class="n">os</span><span class="o">.</span><span class="n">Remove</span><span class="p">(</span><span class="s">"data1.csv"</span><span class="p">)</span>
	<span class="k">if</span> <span class="n">e</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
		<span class="n">log</span><span class="o">.</span><span class="n">Fatal</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
	<span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="i-did-it-but-its-complicated">I DID IT but its complicated</h2>

<p>This time i figured out where i went wrong and understood html codes in forbes were java script rendered. Geziyor was the framework which supported it. Its was easy after identifying it.Its possible to fetch required part of the html to a json file using this framework, and is easy to convert it to a csv.But there was issue. Go couldnt identify  class=”Country/Territory”. Even i tried it with “//”. It didnt help. I couldnt print the Country/Territory. I couldnt come up with a btr approach. How i did it was, I used geziyor to scrap all the html codes to a txt file, editted each “Country/Territory”  to “Country”. Made a local web server and used colly to scrap it. This time it worked, But i had to run two files. One with the geziyor frame work which scraped the link and made a local server. Then one with colly which actually scraps the required elements and save it inside a csv file.I should have tried to find a way to include “/” and im still working on it.
Please follow this method to use my scraper:<br />
1.Head to working_one directory<br />
2.Run the gey-serve.go file inside the serve_here directory<br />
3.Run the colly.go file inside the working_one directory</p>

<p>Code to run go file : go run . or go run filename.go</p>

<p><a href="https://github.com/Akshaj000/amfoss-tasks/tree/master/task-07/working_one">THIS</a> is my final file.
Im not pasting my code. Please visit my github directory.</p>

<p>Webscraping using geziyor is easy. Please follow this <a href="https://github.com/geziyor/geziyor">link</a>.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ParseFunc: func(g *geziyor.Geziyor, r *client.Response) {
        writer.write(string(r.Body))
    },
</code></pre></div></div>
<p>I had to write characters one by one to different file. Later i had to edit that file properly to use colly.
<a href="/Htmltask/forbes/data.html">This</a> is the html file i got after scrapping. Yeah its impossible to scrap that. So removed first few lines using this <a href="https://stackoverflow.com/questions/30940190/remove-first-line-from-text-file-in-golang">method</a>.
Later had to convert the html to txt, since golang couldnt read “/” inside html properly due to some reason. I replaced “Country/Territory” with “Country” using :</p>
<div class="language-golang highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">func</span> <span class="n">visit</span><span class="p">(</span><span class="n">path</span> <span class="kt">string</span><span class="p">,</span> <span class="n">fi</span> <span class="n">os</span><span class="o">.</span><span class="n">FileInfo</span><span class="p">,</span> <span class="n">err</span> <span class="kt">error</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>

	<span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
		<span class="k">return</span> <span class="n">err</span>
	<span class="p">}</span>

	<span class="n">matched</span><span class="p">,</span> <span class="n">_</span> <span class="o">:=</span> <span class="n">filepath</span><span class="o">.</span><span class="n">Match</span><span class="p">(</span><span class="s">"*.txt"</span><span class="p">,</span> <span class="n">fi</span><span class="o">.</span><span class="n">Name</span><span class="p">())</span>

	<span class="k">if</span> <span class="n">matched</span> <span class="p">{</span>
		<span class="n">read</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">ioutil</span><span class="o">.</span><span class="n">ReadFile</span><span class="p">(</span><span class="s">"out.txt"</span><span class="p">)</span>
		<span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
			<span class="nb">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
		<span class="p">}</span>

		<span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>

		<span class="n">newContents</span> <span class="o">:=</span> <span class="n">strings</span><span class="o">.</span><span class="n">Replace</span><span class="p">(</span><span class="kt">string</span><span class="p">(</span><span class="n">read</span><span class="p">),</span> <span class="s">"Country/Territory"</span><span class="p">,</span> <span class="s">"Country"</span><span class="p">,</span> <span class="o">-</span><span class="m">1</span><span class="p">)</span>

		<span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">newContents</span><span class="p">)</span>

		<span class="n">err</span> <span class="o">=</span> <span class="n">ioutil</span><span class="o">.</span><span class="n">WriteFile</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="p">[]</span><span class="kt">byte</span><span class="p">(</span><span class="n">newContents</span><span class="p">),</span> <span class="m">0</span><span class="p">)</span>
		<span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
			<span class="nb">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
		<span class="p">}</span>

	<span class="p">}</span>

	<span class="k">return</span> <span class="no">nil</span>
<span class="p">}</span>
</code></pre></div></div>
<p>After doing all these , <a href="/Htmltask/forbes/index.html">this</a> is my forbes now.
Later i created a local server :</p>

<div class="language-golang highlighter-rouge"><div class="highlight"><pre class="highlight"><code>        <span class="n">port</span> <span class="o">:=</span> <span class="n">flag</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="s">"p"</span><span class="p">,</span> <span class="s">"8100"</span><span class="p">,</span> <span class="s">"port to serve on"</span><span class="p">)</span>
	<span class="n">directory</span> <span class="o">:=</span> <span class="n">flag</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="s">"d"</span><span class="p">,</span> <span class="s">"."</span><span class="p">,</span> <span class="s">"the directory of static file to host"</span><span class="p">)</span>
	<span class="n">flag</span><span class="o">.</span><span class="n">Parse</span><span class="p">()</span>

	<span class="n">http</span><span class="o">.</span><span class="n">Handle</span><span class="p">(</span><span class="s">"/"</span><span class="p">,</span> <span class="n">http</span><span class="o">.</span><span class="n">FileServer</span><span class="p">(</span><span class="n">http</span><span class="o">.</span><span class="n">Dir</span><span class="p">(</span><span class="o">*</span><span class="n">directory</span><span class="p">)))</span>

	<span class="n">log</span><span class="o">.</span><span class="n">Printf</span><span class="p">(</span><span class="s">"Serving %s on HTTP port: %s</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="o">*</span><span class="n">directory</span><span class="p">,</span> <span class="o">*</span><span class="n">port</span><span class="p">)</span>
	<span class="n">log</span><span class="o">.</span><span class="n">Fatal</span><span class="p">(</span><span class="n">http</span><span class="o">.</span><span class="n">ListenAndServe</span><span class="p">(</span><span class="s">":"</span><span class="o">+*</span><span class="n">port</span><span class="p">,</span> <span class="no">nil</span><span class="p">))</span>
</code></pre></div></div>
<p>Used basic colly to scrap from here. And added to csv. Its complicated but yeah finally i did it.</p>

<p>CSV file :</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Country,NetWorth,Age,Source
United States,$271.5 B,50,"Tesla, SpaceX"
United States,$203.1 B,57,Amazon
France,$199.5 B,72,LVMH
United States,$138.8 B,66,Microsoft
United States,$127.0 B,48,Google
United States,$126.1 B,77,software
United States,$122.3 B,48,Google
United States,$121.9 B,37,Facebook
United States,$106.0 B,65,Microsoft
United States,$104.1 B,91,Berkshire Hathaway

</code></pre></div></div>

<h1 id="finally">Finally</h1>
<p>I should have actually found a different way to type /.
Im supposed to use <code class="language-plaintext highlighter-rouge">'\\/'</code> instead of <code class="language-plaintext highlighter-rouge">/</code> or <code class="language-plaintext highlighter-rouge">//</code>.</p>

<h1 id="the-actual-working-code-">THE ACTUAL WORKING CODE :</h1>
<div class="language-golang highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
	<span class="s">"encoding/csv"</span>
	<span class="s">"os"</span>

	<span class="s">"github.com/PuerkitoBio/goquery"</span>
	<span class="s">"github.com/geziyor/geziyor"</span>
	<span class="s">"github.com/geziyor/geziyor/client"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>

	<span class="n">file</span><span class="p">,</span> <span class="n">_</span> <span class="o">:=</span> <span class="n">os</span><span class="o">.</span><span class="n">Create</span><span class="p">(</span><span class="s">"data.csv"</span><span class="p">)</span>
	<span class="n">writer</span> <span class="o">:=</span> <span class="n">csv</span><span class="o">.</span><span class="n">NewWriter</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
	<span class="n">head</span> <span class="o">:=</span> <span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">"Country"</span><span class="p">,</span> <span class="s">"Networth"</span><span class="p">,</span> <span class="s">"Age"</span><span class="p">,</span> <span class="s">"Source"</span><span class="p">}</span>
	<span class="n">writer</span><span class="o">.</span><span class="n">Write</span><span class="p">(</span><span class="n">head</span><span class="p">)</span>
	<span class="n">count</span> <span class="o">:=</span> <span class="m">0</span>
	<span class="n">geziyor</span><span class="o">.</span><span class="n">NewGeziyor</span><span class="p">(</span><span class="o">&amp;</span><span class="n">geziyor</span><span class="o">.</span><span class="n">Options</span><span class="p">{</span>
		<span class="n">StartRequestsFunc</span><span class="o">:</span> <span class="k">func</span><span class="p">(</span><span class="n">g</span> <span class="o">*</span><span class="n">geziyor</span><span class="o">.</span><span class="n">Geziyor</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">g</span><span class="o">.</span><span class="n">GetRendered</span><span class="p">(</span><span class="s">"https://www.forbes.com/real-time-billionaires/#50cd30c23d78"</span><span class="p">,</span> <span class="n">g</span><span class="o">.</span><span class="n">Opt</span><span class="o">.</span><span class="n">ParseFunc</span><span class="p">)</span>
		<span class="p">},</span>
		<span class="n">ParseFunc</span><span class="o">:</span> <span class="k">func</span><span class="p">(</span><span class="n">g</span> <span class="o">*</span><span class="n">geziyor</span><span class="o">.</span><span class="n">Geziyor</span><span class="p">,</span> <span class="n">r</span> <span class="o">*</span><span class="n">client</span><span class="o">.</span><span class="n">Response</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">r</span><span class="o">.</span><span class="n">HTMLDoc</span><span class="o">.</span><span class="n">Find</span><span class="p">(</span><span class="s">"tr.base.ng-scope"</span><span class="p">)</span><span class="o">.</span><span class="n">Each</span><span class="p">(</span><span class="k">func</span><span class="p">(</span><span class="n">_</span> <span class="kt">int</span><span class="p">,</span> <span class="n">s</span> <span class="o">*</span><span class="n">goquery</span><span class="o">.</span><span class="n">Selection</span><span class="p">)</span> <span class="p">{</span>
				<span class="n">Country</span> <span class="o">:=</span> <span class="n">s</span><span class="o">.</span><span class="n">Find</span><span class="p">(</span><span class="s">"td.Country</span><span class="se">\\</span><span class="s">/Territory"</span><span class="p">)</span><span class="o">.</span><span class="n">Text</span><span class="p">()</span>
				<span class="n">Networth</span> <span class="o">:=</span> <span class="n">s</span><span class="o">.</span><span class="n">Find</span><span class="p">(</span><span class="s">"td.Net.Worth"</span><span class="p">)</span><span class="o">.</span><span class="n">Text</span><span class="p">()</span>
				<span class="n">Age</span> <span class="o">:=</span> <span class="n">s</span><span class="o">.</span><span class="n">Find</span><span class="p">(</span><span class="s">"td.age"</span><span class="p">)</span><span class="o">.</span><span class="n">Text</span><span class="p">()</span>
				<span class="n">Source</span> <span class="o">:=</span> <span class="n">s</span><span class="o">.</span><span class="n">Find</span><span class="p">(</span><span class="s">"td.source"</span><span class="p">)</span><span class="o">.</span><span class="n">Text</span><span class="p">()</span>
				<span class="n">posts</span> <span class="o">:=</span> <span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="n">Country</span><span class="p">,</span> <span class="n">Networth</span><span class="p">,</span> <span class="n">Age</span><span class="p">,</span> <span class="n">Source</span><span class="p">}</span>
				<span class="n">writer</span><span class="o">.</span><span class="n">Write</span><span class="p">(</span><span class="n">posts</span><span class="p">)</span>
				<span class="n">count</span> <span class="o">+=</span> <span class="m">1</span>
				<span class="k">if</span> <span class="n">count</span> <span class="o">&lt;=</span> <span class="m">10</span> <span class="p">{</span>
					<span class="n">writer</span><span class="o">.</span><span class="n">Flush</span><span class="p">()</span>
				<span class="p">}</span>
			<span class="p">})</span>

		<span class="p">},</span>
	<span class="p">})</span><span class="o">.</span><span class="n">Start</span><span class="p">()</span>
<span class="p">}</span>

</code></pre></div></div>
<p>CSV FILE :</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Country,NetWorth,Age,Source
United States,$271.5 B,50,"Tesla, SpaceX"
United States,$203.1 B,57,Amazon
France,$199.5 B,72,LVMH
United States,$138.8 B,66,Microsoft
United States,$127.0 B,48,Google
United States,$126.1 B,77,software
United States,$122.3 B,48,Google
United States,$121.9 B,37,Facebook
United States,$106.0 B,65,Microsoft
United States,$104.1 B,91,Berkshire Hathaway
</code></pre></div></div>

<p><br /></p>
<p style="text-align:left;">
<a href="/2021/09/28/flutter/index.html">&lt; Previous</a>
<span style="float:right;"><a href="/2021/09/30/htmljs/index.html">Next &gt;</a>
</span>
</p>


  </div>

          </div>
        </div>
      </div>
    </div>
  </div>


 
